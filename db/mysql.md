### MySQL

---

关系型数据库，建立在关系模型基础上的数据库，"关系型"可以理解为"表格"，用表格表示数据，InnoDB存储引擎

主键：能唯一标识一条记录。主键最好不能修改，主键应当是对用户没有意义的。不使用任何业务相关的字段作为主键

外键：用于与另一张表的关联。是能确定另一张表记录的字段，用于保持数据的一致性

索引：是一个排序的列表，在这个列表中存储着索引的值和包含这个值的数据所在行的物理地址，在数据十分庞大的时候，索引可以大大加快查询的速度，这是因为使用索引后可以不用扫描全表来定位某行的数据，而是先通过索引表找到该行数据对应的物理地址然后访问相应的数据。

索引类型：主键索引、唯一索引、普通索引、全文索引、组合索引

存储引擎实现原理：B-Tree 索引(B+树)，Hash 索引(哈希表)

B-Tree 索引：存储引擎添加了指向相邻叶节点的指针，形成了带有顺序访问指针的B+树。B+树的叶子节点存放了所有的索引值，并且叶子结点之间以链表的形式相互关联，支持范围查找和排序，对比Hash 索引的优点。B+树的非叶节点中不存储data，就可以存储更多的key，那么树的高度越小，需要I/O的次数越少，对比B树的优点

InnoDB数据文件和索引文件都是放在表空间的，即data目录下对应数据库的`idb`文件

优点是提高了查询效率，缺点是在插入、更新和删除记录时，需要同时修改索引，因此，索引越多，插入、更新和删除记录的速度就越慢。

- 主键自动建立唯一索引；
- 经常作为查询条件在WHERE或者ORDER BY 语句中出现的列要建立索引；
- 作为排序的列要建立索引；
- 查询中与其他表关联的字段，外键关系建立索引



用主键键值建立的索引称为“主索引”，其它的称为“辅助索引”

聚集索引-InnoDB：数据和主键索引存储在一起，数据是根据主键的顺序保存。在索引页里直接存放数据。主索引的叶子结点存储的是键值对应的数据本身，会占用更多的空间，辅助索引的叶子结点存储的是键值对应的数据的主键键值。

非聚集索引-MyISAM：数据表和索引表是分开存储的，数据是根据数据的插入顺序保存。在索引页里存放的是索引，这些索引指向专门的数据页的数据。主索引和辅助索引几乎是一样的，只是主索引不允许重复，不允许空值，他们的叶子结点的key都存储指向键值对应的数据的物理地址，在查到数据的地址后，还要进行一次I/O查找数据。

#### mysqljs

---

node.js库  [代码](https://github.com/mysqljs/mysql)   